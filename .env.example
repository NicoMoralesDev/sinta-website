# Primary Postgres connection string used by the app and scripts.
# Supabase pooler modes:
# - Session pooler  -> port 5432 (persistent connections)
# - Transaction pooler -> port 6543 (recommended for serverless/transient connections)
DATABASE_URL=postgresql://postgres.<project-ref>:<url-encoded-password>@aws-0-us-west-2.pooler.supabase.com:<5432-or-6543>/postgres?sslmode=require

# Postgres pool tuning (safe defaults for serverless).
# In production defaults to 1 when unset; keep low to avoid exhausting pooled connections.
DB_POOL_MAX=1
# Milliseconds to keep idle clients before closing.
DB_POOL_IDLE_TIMEOUT_MS=5000
# Milliseconds to wait for a new connection before failing.
DB_POOL_CONNECTION_TIMEOUT_MS=10000

# Secret used to sign admin session cookies (required in all environments).
ADMIN_SESSION_SECRET=replace-with-long-random-secret
# Extra secret appended before password hashing (required in all environments).
ADMIN_PASSWORD_PEPPER=replace-with-long-random-pepper

# Development-only flag: when "1", admin write endpoints return dry-run previews and do not mutate DB.
ADMIN_DEV_DRY_RUN=1
# Development-only flag: when "1", enables /admin UI and /api/v1/admin/* routes in non-production.
ADMIN_ENABLE_IN_DEV=1
# One-time bootstrap owner username used by `npm run bootstrap:admin`.
ADMIN_BOOTSTRAP_USERNAME=owner
# One-time bootstrap owner temporary password used by `npm run bootstrap:admin`.
ADMIN_BOOTSTRAP_PASSWORD=replace-with-temporary-password

RUN_DB_INTEGRATION_TESTS=1
